<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CHASTE DRAGON - Event Manager</title>
<style>
body {
    background:black;
    color:white;
    font-family:Poppins, sans-serif;
    padding:40px;
    line-height:1.8;
}
h1, h2 {
    color:gold;
}
input, textarea, button {
    padding:10px;
    margin:5px 0;
    border-radius:5px;
    border:none;
}
input, textarea {
    width:100%;
}
button {
    background:gold;
    color:black;
    cursor:pointer;
    font-weight:bold;
}
.event {
    background:#111;
    border:1px solid gold;
    border-radius:10px;
    padding:15px;
    margin-bottom:15px;
}
</style>
</head>
<body>

<h1>CHASTE DRAGON EVENT MANAGER</h1>

<div id="loginDiv">
    <h2>Login / Register</h2>
    <input type="text" id="username" placeholder="Masukkan username" />
    <button onclick="login()">Login</button>
</div>

<div id="eventDiv" style="display:none;">
    <h2>Buat Event Baru</h2>
    <input type="text" id="eventTitle" placeholder="Judul Event" />
    <textarea id="eventDesc" placeholder="Deskripsi Event"></textarea>
    <button onclick="createEvent()">Buat Event</button>

    <h2>Event Terbaru</h2>
    <div id="eventsList"></div>

    <button onclick="logout()">Logout</button>
</div>

<script>
let currentUser = null;

// Fungsi login
function login() {
    const username = document.getElementById('username').value.trim();
    if(!username) return alert("Isi username dulu!");
    currentUser = username;
    localStorage.setItem('currentUser', username);
    document.getElementById('loginDiv').style.display = 'none';
    document.getElementById('eventDiv').style.display = 'block';
    loadEvents();
}

// Fungsi logout
function logout() {
    currentUser = null;
    localStorage.removeItem('currentUser');
    document.getElementById('loginDiv').style.display = 'block';
    document.getElementById('eventDiv').style.display = 'none';
}

// Fungsi membuat event
function createEvent() {
    const title = document.getElementById('eventTitle').value.trim();
    const desc = document.getElementById('eventDesc').value.trim();
    if(!title || !desc) return alert("Isi semua kolom!");
    
    let events = JSON.parse(localStorage.getItem('events') || "[]");
    events.push({title, desc, author: currentUser, date: new Date().toLocaleString()});
    localStorage.setItem('events', JSON.stringify(events));
    
    document.getElementById('eventTitle').value = '';
    document.getElementById('eventDesc').value = '';
    loadEvents();
}

// Fungsi menampilkan event
function loadEvents() {
    let events = JSON.parse(localStorage.getItem('events') || "[]");
    const container = document.getElementById('eventsList');
    container.innerHTML = '';
    if(events.length === 0) {
        container.innerHTML = '<p>Tidak ada event.</p>';
        return;
    }
    events.reverse().forEach(ev => {
        const div = document.createElement('div');
        div.className = 'event';
        div.innerHTML = `<strong>${ev.title}</strong> <br>
                         <em>oleh: ${ev.author} | ${ev.date}</em><br>
                         ${ev.desc}`;
        container.appendChild(div);
    });
}

// Auto-login kalau sebelumnya sudah login
window.onload = () => {
    const savedUser = localStorage.getItem('currentUser');
    if(savedUser) {
        currentUser = savedUser;
        document.getElementById('loginDiv').style.display = 'none';
        document.getElementById('eventDiv').style.display = 'block';
        loadEvents();
    }
}
</script>

</body>
</html>