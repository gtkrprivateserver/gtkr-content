<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CHASTE DRAGON - Jadwal Event</title>
<style>
body {
    background:black;
    color:white;
    font-family:Poppins, sans-serif;
    padding:40px;
    line-height:1.8;
}
h1, h2 {
    color:gold;
}
.event {
    background:#111;
    border:1px solid gold;
    border-radius:10px;
    padding:15px;
    margin-bottom:15px;
}
.countdown {
    color:lightgreen;
    font-weight:bold;
}
button, input, textarea, select {
    padding:10px;
    border-radius:5px;
    border:none;
    margin:5px 0;
}
button {
    background:gold;
    color:black;
    cursor:pointer;
    font-weight:bold;
}
#popupForm {
    display:none;
    position:fixed;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%);
    background:#111;
    border:2px solid gold;
    border-radius:10px;
    padding:20px;
    z-index:1000;
    width:90%;
    max-width:400px;
}
#overlay {
    display:none;
    position:fixed;
    top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.7);
    z-index:500;
}
</style>
</head>
<body>

<h1>CHASTE DRAGON - Jadwal Event</h1>

<div id="eventsList"></div>

<button onclick="showPopup()">Hubungi Admin</button>

<!-- Overlay -->
<div id="overlay" onclick="closePopup()"></div>

<!-- Popup Form -->
<div id="popupForm">
    <h2 style="color:gold;">Hubungi Admin</h2>
    <input type="text" id="fullName" placeholder="Nama Lengkap" />
    <input type="text" id="accountName" placeholder="Nama Akun" />
    <input type="text" id="roomLink" placeholder="Link Room VR" />
    <select id="eventSelect">
        <option value="">Pilih Event</option>
    </select>
    <input type="text" id="prize" placeholder="Hadiah" />
    <button onclick="sendWhatsApp()">Kirim ke Admin</button>
    <button onclick="closePopup()" style="background:red;color:white;">Tutup</button>
</div>

<script>
// Daftar event dengan tanggal dan jam
const events = [
    { title: "Event Receh", date: "2026-03-10T21:00:00" },
    { title: "Event Ludo", date: "2026-03-20T21:00:00" },
    { title: "Event Dadu", date: "2026-03-25T21:00:00" },
    { title: "Event Nyanyi", date: "2026-04-05T21:00:00" },
    { title: "Event Pantun", date: "2026-04-10T21:00:00" },
    { title: "Event Teka-Teki", date: "2026-04-15T21:00:00" },
    { title: "Event Romantis", date: "2026-04-20T21:00:00" },
    { title: "Event Batu Gunting Kertas", date: "2026-04-25T18:30:00" },
    { title: "Event Math", date: "2026-04-30T18:30:00" },
    { title: "Event Menggambar", date: "2026-05-10T18:30:00" }
];

// Tampilkan event
function displayEvents() {
    const container = document.getElementById('eventsList');
    container.innerHTML = '';
    const eventSelect = document.getElementById('eventSelect');
    eventSelect.innerHTML = '<option value="">Pilih Event</option>'; // reset select

    const now = new Date().getTime();

    events.forEach(ev => {
        const div = document.createElement('div');
        div.className = 'event';
        div.innerHTML = `<strong>${ev.title}</strong><br>
                         Tanggal & Jam: ${new Date(ev.date).toLocaleString()}<br>
                         <span class="countdown" id="countdown-${ev.title.replace(/\s/g,'')}">Menghitung...</span>`;
        container.appendChild(div);

        // Tambahkan ke dropdown hanya jika event belum lewat
        if(new Date(ev.date).getTime() > now){
            const option = document.createElement('option');
            option.value = ev.title;
            option.textContent = ev.title;
            eventSelect.appendChild(option);
        }
    });
}

// Update countdown
function updateCountdown() {
    events.forEach(ev => {
        const now = new Date().getTime();
        const eventTime = new Date(ev.date).getTime();
        const distance = eventTime - now;
        const countdownEl = document.getElementById(`countdown-${ev.title.replace(/\s/g,'')}`);
        if(distance > 0){
            const days = Math.floor(distance / (1000*60*60*24));
            const hours = Math.floor((distance % (1000*60*60*24)) / (1000*60*60));
            const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
            const seconds = Math.floor((distance % (1000*60)) / 1000);
            countdownEl.textContent = `Countdown: ${days}d ${hours}h ${minutes}m ${seconds}s`;
        } else {
            countdownEl.textContent = "Event sedang berlangsung / sudah selesai!";
        }
    });
}

// Popup form
function showPopup(){
    displayEvents(); // refresh dropdown
    document.getElementById('popupForm').style.display = 'block';
    document.getElementById('overlay').style.display = 'block';
}
function closePopup(){
    document.getElementById('popupForm').style.display = 'none';
    document.getElementById('overlay').style.display = 'none';
}

// Kirim ke WhatsApp admin
function sendWhatsApp(){
    const fullName = encodeURIComponent(document.getElementById('fullName').value);
    const accountName = encodeURIComponent(document.getElementById('accountName').value);
    const roomLink = encodeURIComponent(document.getElementById('roomLink').value);
    const eventName = document.getElementById('eventSelect').value;
    const prize = encodeURIComponent(document.getElementById('prize').value);

    if(!fullName || !accountName || !roomLink || !eventName){
        return alert("Harap isi semua kolom wajib!");
    }

    // Cek tanggal event
    const selectedEvent = events.find(ev => ev.title === eventName);
    if(new Date(selectedEvent.date).getTime() <= new Date().getTime()){
        return alert("Maaf, event ini sudah lewat. Pilih event lain.");
    }

    const adminNumber = "6281234567890"; // Ganti nomor WhatsApp admin
    const message = `Halo Admin, saya ingin mendaftar/menanyakan event:\n\nNama Lengkap: ${fullName}\nNama Akun: ${accountName}\nLink Room VR: ${roomLink}\nNama Event: ${eventName}\nHadiah: ${prize}`;

    const whatsappURL = `https://wa.me/${adminNumber}?text=${message}`;
    window.open(whatsappURL, "_blank");
    closePopup();
}

// Inisialisasi
displayEvents();
setInterval(updateCountdown, 1000);
</script>

<div style="text-align:center;color:gold;font-weight:bold;margin-top:40px;">
  <a href="event.html">â¬… Kembali</a>
</div>

</body>
</html>