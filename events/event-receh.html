<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CHASTE DRAGON EVENT SYSTEM</title>

<style>
body{
  margin:0;
  font-family:'Segoe UI',sans-serif;
  background:linear-gradient(135deg,#000,#111,#1a1a1a);
  color:white;
  text-align:center;
}
header{
  padding:20px;
  background:black;
  border-bottom:2px solid gold;
}
h1{color:gold;}
.container{
  max-width:600px;
  margin:auto;
  padding:20px;
}
.card{
  background:#111;
  padding:20px;
  border-radius:12px;
  border:1px solid gold;
  margin-top:20px;
}
input{
  width:95%;
  padding:10px;
  margin:8px 0;
  border-radius:8px;
  border:none;
}
button{
  padding:10px 15px;
  margin:5px;
  border:none;
  border-radius:8px;
  background:gold;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}
button:hover{background:orange;}
.success{
  background:green !important;
  color:white;
}
.closed{
  background:red !important;
}
.status{
  font-weight:bold;
  margin-bottom:10px;
  font-size:18px;
}
.openStatus{ color:lime; }
.closedStatus{ color:red; }
.idBox{
  margin-top:10px;
  color:gold;
  font-weight:bold;
}
#countdown{
  font-size:18px;
  color:gold;
  margin-bottom:10px;
}
.footer{
  margin-bottom:40px;
}
</style>
</head>
<body>

<header>
<h1>CHASTE DRAGON LEADER</h1>
<p>Event Registration System</p>
</header>

<div class="container">

<div class="card">

<div id="eventStatus" class="status"></div>
<div id="countdown"></div>
<div id="savedId" class="idBox"></div>

<form id="eventForm" onsubmit="joinEvent(event)">

<input type="text" id="eventAkun" placeholder="Nama Akun Walla" required>

<input type="url" id="eventLink" placeholder="Link Akun Walla (https://...)" required>

<input type="text" id="eventNamaAsli" placeholder="Nama Asli" required>

<input type="tel" id="eventPhone"
placeholder="Nomor WhatsApp (62xxxx)"
required pattern="^62[0-9]{9,13}$">

<button type="submit" id="joinBtn">JOIN EVENT</button>

</form>

</div>
</div>

<script>

// ===============================
// âš™ï¸ PENGATURAN
// ===============================

const adminNumber = "6285363155850";

const eventStart = new Date("2026-02-22T00:00");
const eventEnd   = new Date("2026-03-03T00:00");

const statusDiv = document.getElementById("eventStatus");
const joinBtn = document.getElementById("joinBtn");
const savedIdDiv = document.getElementById("savedId");
const countdownDiv = document.getElementById("countdown");

// ===============================
// STATUS EVENT
// ===============================

function updateStatus(){
  const now = new Date();

  if(now >= eventStart && now <= eventEnd){
    statusDiv.innerHTML = "ðŸŸ¢ EVENT STATUS: OPEN";
    statusDiv.classList.add("openStatus");
  }else{
    statusDiv.innerHTML = "ðŸ”´ EVENT STATUS: CLOSED";
    statusDiv.classList.add("closedStatus");
    joinBtn.disabled = true;
    joinBtn.classList.add("closed");
    joinBtn.innerText = "EVENT CLOSED";
  }
}

updateStatus();

// ===============================
// COUNTDOWN
// ===============================

function updateCountdown(){

  const now = new Date().getTime();
  const distance = eventEnd.getTime() - now;

  if(distance <= 0){
    countdownDiv.innerHTML = "â° Event telah berakhir";
    updateStatus();
    return;
  }

  const days = Math.floor(distance / (1000*60*60*24));
  const hours = Math.floor((distance % (1000*60*60*24)) / (1000*60*60));
  const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
  const seconds = Math.floor((distance % (1000*60)) / 1000);

  countdownDiv.innerHTML =
    `â³ Countdown: ${days}H ${hours}J ${minutes}M ${seconds}D`;
}

setInterval(updateCountdown,1000);
updateCountdown();

// ===============================
// CEK ID TERSIMPAN
// ===============================

const existingId = localStorage.getItem("cd_event_id");

if(existingId){
  savedIdDiv.innerHTML = "âœ” Anda sudah terdaftar<br>ID Anda: " + existingId;
  joinBtn.disabled = true;
  joinBtn.classList.add("success");
  joinBtn.innerText = "SUDAH TERDAFTAR";
}

// ===============================
// GENERATE ID
// ===============================

function generateID(){
  const random = Math.floor(Math.random()*10000);
  const time = Date.now().toString().slice(-5);
  return "CD-" + time + random;
}

// ===============================
// JOIN EVENT
// ===============================

function joinEvent(e){
  e.preventDefault();

  if(localStorage.getItem("cd_event_id")){
    alert("Anda sudah terdaftar!");
    return;
  }

  const now = new Date();
  if(!(now >= eventStart && now <= eventEnd)){
    alert("Event sudah ditutup!");
    return;
  }

  const akun = document.getElementById("eventAkun");
  const link = document.getElementById("eventLink");
  const namaAsli = document.getElementById("eventNamaAsli");
  const phone = document.getElementById("eventPhone");

  if(!akun.checkValidity() ||
     !link.checkValidity() ||
     !namaAsli.checkValidity() ||
     !phone.checkValidity()){
    alert("Harap isi data dengan benar!");
    return;
  }

  const idDaftar = generateID();

  localStorage.setItem("cd_event_id", idDaftar);

  const pesan =
`ðŸ”¥ PENDAFTARAN EVENT CHASTE DRAGON ðŸ”¥

ID Pendaftaran: ${idDaftar}

Nama Akun Walla: ${akun.value}
Link Akun Walla: ${link.value}
Nama Asli: ${namaAsli.value}
Nomor WhatsApp: ${phone.value}

Mohon verifikasi ðŸ™`;

  const encodedMessage = encodeURIComponent(pesan);

  window.open(`https://wa.me/${adminNumber}?text=${encodedMessage}`, "_blank");

  joinBtn.innerText = "âœ” TERDAFTAR";
  joinBtn.classList.add("success");
  joinBtn.disabled = true;

  savedIdDiv.innerHTML = "âœ” ID Anda: " + idDaftar;

  document.getElementById("eventForm").reset();
}

</script>

<hr style="border:1px solid gold;margin:40px 0;">

<div class="footer">
<a href="event.html" style="color:gold;text-decoration:none;">
â¬… Back
</a>
</div>

</body>
</html>