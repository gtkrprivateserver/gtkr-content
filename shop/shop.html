<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Shop CHASTE DRAGON</title>
<style>
body{
  background:black;
  font-family:Poppins, sans-serif;
  color:white;
  text-align:center;
  padding:30px;
}

h1{ color:gold; }

.card{
  background:#111;
  border:2px solid gold;
  border-radius:15px;
  padding:25px;
  max-width:850px;
  margin:30px auto;
  box-shadow:0 0 20px gold;
}

.product-img{
  width:100px;
  height:100px;
  object-fit:cover;
  border-radius:10px;
  border:2px solid gold;
  margin-bottom:15px;
}

.buy-btn{
  margin-top:15px;
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:gold;
  color:black;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}

.buy-btn:hover{ background:orange; }

/* ===== MODAL ===== */
.modal{
  display:none;
  position:fixed;
  z-index:999;
  left:0;
  top:0;
  width:100%;
  height:100%;
  overflow:auto;
  background:rgba(0,0,0,0.85);
  animation:fadeIn 0.4s;
}

.modal-content{
  background:#111;
  margin:100px auto;
  padding:30px;
  border:2px solid gold;
  border-radius:15px;
  max-width:400px;
  text-align:center;
  position:relative;
  box-shadow:0 0 30px rgba(255,215,0,0.5);
  transform: scale(0.8);
  animation:scaleUp 0.4s forwards;
}

.modal-content img{
  width:120px;
  height:120px;
  border-radius:10px;
  object-fit:cover;
  border:2px solid gold;
  margin-bottom:15px;
}

.close{
  position:absolute;
  top:10px;
  right:15px;
  font-size:24px;
  font-weight:bold;
  color:white;
  cursor:pointer;
}

.close:hover{ color:gold; }

.modal input, .modal select{
  width:90%;
  padding:10px;
  margin:10px 0;
  border-radius:8px;
  border:none;
  font-size:14px;
}

.modal button{
  padding:10px 20px;
  border:none;
  border-radius:8px;
  background:gold;
  color:black;
  font-weight:bold;
  cursor:pointer;
  transition:0.3s;
}

.modal button:hover{ background:orange; }

/* Animasi keyframes */
@keyframes fadeIn{ from{opacity:0;} to{opacity:1;} }
@keyframes scaleUp{ from{transform:scale(0.8);opacity:0;} to{transform:scale(1);opacity:1;} }
</style>
</head>
<body>

<h1>ðŸ›’ SHOP CHASTE DRAGON</h1>
<h2>Produk Eksklusif & Promo Terbatas</h2>

<div id="promoList"></div>

<!-- MODAL FORM -->
<div id="buyModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <img id="modalImg">
    <h3 id="modalName"></h3>

    <input type="number" id="inputJumlah" placeholder="Jumlah" min="1" required>
    <input type="text" id="inputNama" placeholder="Nama Lengkap" required>
    <input type="text" id="inputKota" placeholder="Asal Kota" required>
    <select id="inputVia" required>
      <option value="">Pilih Metode Pembayaran</option>
      <option value="Bank Transfer">Bank Transfer</option>
      <option value="GOPAY">GOPAY</option>
      <option value="OVO">OVO</option>
      <option value="DANA">DANA</option>
    </select>
    <button onclick="submitOrder()">Kirim Order via WhatsApp</button>
  </div>
</div>

<script>
const adminNumber = "6285363155850"; // Nomor admin

let products = [
  { name:"T-Shirt CHASTE DRAGON", img:"/asset/product1.png", stok:50 },
  { name:"Hoodie CHASTE DRAGON", img:"/asset/product2.png", stok:30 },
  { name:"Topi CHASTE DRAGON", img:"/asset/product3.png", stok:100 }
];

let currentProductIndex = null;

function generateProductCard(product, index){
  return `
  <div class="card">
    <img src="${product.img}" class="product-img">
    <h3 style="color:gold;">${product.name}</h3>
    <div class="status" id="stok-${index}">Stok: ${product.stok}</div>
    <button class="buy-btn" onclick="openModal(${index})" ${product.stok<=0?'disabled style="background:red;cursor:not-allowed;"':''}>
      ${product.stok>0?'Beli Sekarang':'Stok Habis'}
    </button>
  </div>`;
}

function updateProducts(){
  document.getElementById("promoList").innerHTML = products.map(generateProductCard).join("");
}

updateProducts();

/* ===== MODAL FUNCTIONS ===== */
function openModal(index){
  currentProductIndex = index;
  const product = products[index];
  document.getElementById("modalName").innerText = product.name;
  document.getElementById("modalImg").src = product.img;
  document.getElementById("buyModal").style.display = "block";
  document.getElementById("inputJumlah").value = 1;
}

function closeModal(){
  document.getElementById("buyModal").style.display = "none";
}

window.onclick = function(event){
  const modal = document.getElementById("buyModal");
  if(event.target == modal) modal.style.display = "none";
}

/* ===== SUBMIT ORDER ===== */
function submitOrder(){
  const jumlah = parseInt(document.getElementById("inputJumlah").value);
  const nama = document.getElementById("inputNama").value;
  const kota = document.getElementById("inputKota").value;
  const via = document.getElementById("inputVia").value;

  if(!jumlah || jumlah<1 || !nama || !kota || !via){
    alert("Harap lengkapi semua data dengan benar!");
    return;
  }

  const product = products[currentProductIndex];

  if(jumlah > product.stok){
    alert("Jumlah melebihi stok tersedia!");
    return;
  }

  // Kurangi stok
  product.stok -= jumlah;
  document.getElementById(`stok-${currentProductIndex}`).innerText = "Stok: " + product.stok;

  // Disable button jika stok habis
  if(product.stok <= 0){
    updateProducts();
  }

  const pesan = `ðŸ”¥ ORDER CHASTE DRAGON ðŸ”¥%0A%0AProduk: ${product.name}%0AJumlah: ${jumlah}%0ANama: ${nama}%0AKota: ${kota}%0AVia Pembayaran: ${via}%0A%0AMohon konfirmasi pembayaran.`;
  const url = `https://wa.me/${adminNumber}?text=${pesan}`;
  window.open(url, "_blank");
  closeModal();
}
</script>

<div class="footer" style="margin-top:50px;">
<a href="https://chastedragon.vercel.app" style="color:gold;text-decoration:none;">â¬… Kembali</a>
</div>

</body>
</html>