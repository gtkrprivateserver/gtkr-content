<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Shop DonatSur - CHASTE DRAGON</title>

<style>
body{
  background:black;
  color:white;
  font-family:Poppins;
  padding:40px;
}

h1,h2,h3{color:gold;}

input, textarea, select{
  padding:8px;
  width:100%;
  margin-bottom:10px;
}

.varian-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:15px;
}

.varian-item{
  border:2px solid gold;
  padding:10px;
  text-align:center;
}

.varian-item img{
  width:100%;
  height:130px;
  object-fit:cover;
}

.qty-box{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  margin-top:5px;
}

.admin-panel{
  border:2px solid red;
  padding:20px;
  margin-top:40px;
}
</style>
</head>

<body>

<h1>üç© SHOP DONATSUR</h1>
<h2>CHASTE DRAGON SQUAD</h2>

<h2 id="shopStatus" style="color:lime;">SHOP SEDANG BUKA</h2>

<hr style="border:1px solid gold;margin:30px 0;">

<div id="shopContent">

<!-- ================= FORM PEMBELI ================= -->

<h3>üìã Data Pembeli</h3>

<input type="text" id="nama" placeholder="Nama Lengkap">
<input type="text" id="kota" placeholder="Asal Kota">
<textarea id="alamat" placeholder="Alamat Rumah / Lokasi"></textarea>

<select id="pembayaran">
<option value="">-- Pilih Via Pembayaran --</option>
<option>Transfer Bank</option>
<option>QRIS</option>
<option>COD</option>
<option>E-Wallet</option>
</select>

<h3 style="color:gold;">üí∞ Total Pembayaran</h3>
<input type="text" id="totalForm" readonly style="font-weight:bold;color:gold;">

<hr style="border:1px solid gold;margin:30px 0;">

<!-- ================= PAKET ================= -->

<h3>Pilih Paket</h3>
<select id="paket" onchange="resetSemua()">
  <option value="3">Box Isi 3 (Diskon 5%)</option>
  <option value="6">Box Isi 6 (Diskon 10%)</option>
</select>

<br><br>

<h3>Pilih Donat</h3>
<div class="varian-grid" id="varianContainer"></div>

<br>

<h3>Promo Code</h3>
<input type="text" id="promoInput" placeholder="Kode Promo">
<button onclick="hitungTotal()">Gunakan</button>

<button onclick="pesanSekarang()" 
style="padding:15px 30px;background:gold;color:black;font-weight:bold;border:none;">
Pesan Sekarang
</button>

</div>

<!-- ================= ADMIN PANEL ================= -->

<div class="admin-panel">
<h3 style="color:red;">üîê ADMIN PANEL</h3>

<div id="loginArea">
<input type="password" id="adminPass" placeholder="Masukkan Password">
<button onclick="loginAdmin()">Login</button>
</div>

<div id="adminControls" style="display:none;">
<button onclick="toggleShop()">Buka / Tutup Shop</button>
<button onclick="logoutAdmin()">Logout</button>
</div>
</div>

<script>
const hargaSatuan = 8000;
const phoneNumber = "628XXXXXXXXXX";
const adminPassword = "dragon123";

const promoList = {
"DRAGON5":0.05,
"DONAT10":0.10
};

let cart = {};
let shopOpen = true;

const varianList = [
"Coklat","Regal Matcha","Tiramisu Biscoff","Keju",
"Custard Milk","Sugar Dust","Buttery Glazed",
"Triple Choco","Double Choco"
];

function generateMenu(){
  const container = document.getElementById("varianContainer");
  container.innerHTML="";
  cart={};

  varianList.forEach(rasa=>{
    cart[rasa]=0;

    const item=document.createElement("div");
    item.className="varian-item";

    item.innerHTML=`
      <img src="https://via.placeholder.com/150">
      <p><strong>${rasa}</strong></p>
      <p style="color:gold;">Rp ${hargaSatuan.toLocaleString("id-ID")}</p>
      <div class="qty-box">
        <button onclick="kurang('${rasa}')">-</button>
        <span id="qty-${rasa}">0</span>
        <button onclick="tambah('${rasa}')">+</button>
      </div>
    `;

    container.appendChild(item);
  });

  hitungTotal();
}

function totalItem(){
  return Object.values(cart).reduce((a,b)=>a+b,0);
}

function tambah(rasa){
  const paket=parseInt(document.getElementById("paket").value);
  if(totalItem()>=paket){
    alert("Jumlah sesuai paket!");
    return;
  }
  cart[rasa]++;
  document.getElementById("qty-"+rasa).innerText=cart[rasa];
  hitungTotal();
}

function kurang(rasa){
  if(cart[rasa]>0){
    cart[rasa]--;
    document.getElementById("qty-"+rasa).innerText=cart[rasa];
    hitungTotal();
  }
}

function hitungTotal(){
  const paket=parseInt(document.getElementById("paket").value);
  let subtotal=totalItem()*hargaSatuan;

  let diskon=paket===3?subtotal*0.05:subtotal*0.10;
  let total=subtotal-diskon;

  const kode=document.getElementById("promoInput").value.toUpperCase();
  if(promoList[kode]){
    total-=total*promoList[kode];
  }

  document.getElementById("totalForm").value=
    "Rp "+total.toLocaleString("id-ID");
}

function pesanSekarang(){
  if(!shopOpen){
    alert("Shop sedang tutup!");
    return;
  }

  const nama=document.getElementById("nama").value;
  const kota=document.getElementById("kota").value;
  const alamat=document.getElementById("alamat").value;
  const bayar=document.getElementById("pembayaran").value;

  if(!nama||!kota||!alamat||!bayar){
    alert("Lengkapi data pembeli!");
    return;
  }

  const paket=parseInt(document.getElementById("paket").value);
  if(totalItem()!==paket){
    alert("Jumlah harus sesuai paket!");
    return;
  }

  let detail="";
  for(let rasa in cart){
    if(cart[rasa]>0){
      detail+=`${rasa} x${cart[rasa]}%0A`;
    }
  }

  const total=document.getElementById("totalForm").value;

  const pesan=`Halo Admin DonatSur üç©%0A
Nama: ${nama}%0A
Kota: ${kota}%0A
Alamat: ${alamat}%0A
Pembayaran: ${bayar}%0A
%0APesanan:%0A${detail}
Total: ${total}`;

  window.open(`https://wa.me/${phoneNumber}?text=${pesan}`,"_blank");
}

function loginAdmin(){
  if(document.getElementById("adminPass").value===adminPassword){
    document.getElementById("loginArea").style.display="none";
    document.getElementById("adminControls").style.display="block";
  }else alert("Password salah!");
}

function logoutAdmin(){
  document.getElementById("loginArea").style.display="block";
  document.getElementById("adminControls").style.display="none";
}

function toggleShop(){
  shopOpen=!shopOpen;
  if(shopOpen){
    document.getElementById("shopStatus").innerText="SHOP SEDANG BUKA";
    document.getElementById("shopStatus").style.color="lime";
    document.getElementById("shopContent").style.display="block";
  }else{
    document.getElementById("shopStatus").innerText="SHOP SEDANG TUTUP";
    document.getElementById("shopStatus").style.color="red";
    document.getElementById("shopContent").style.display="none";
  }
}

generateMenu();
</script>

</body>
</html>