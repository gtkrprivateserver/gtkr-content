<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Shop DonatSur - CHASTE DRAGON</title>

<style>
*{ box-sizing:border-box; }

body{
  background:black;
  color:white;
  font-family:Poppins;
  padding:40px;
}

h1,h2,h3{color:gold;}

a{
  color:gold;
  text-decoration:none;
  font-weight:bold;
}

.top-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  flex-wrap:wrap;
  margin-bottom:20px;
}

.varian-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
  gap:15px;
}

.varian-item{
  border:2px solid gold;
  padding:10px;
  text-align:center;
}

.varian-item img{
  width:100%;
  height:130px;
  object-fit:cover;
}

.qty-box{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:10px;
  margin-top:5px;
}

.form-box{
  border:2px solid gold;
  padding:20px;
  margin-top:30px;
  max-width:600px;
}

.form-box input,
.form-box select{
  width:100%;
  padding:10px;
  margin:8px 0;
}

.form-box button{
  width:100%;
  padding:15px;
  background:gold;
  color:black;
  font-weight:bold;
  border:none;
  margin-top:15px;
  cursor:pointer;
}

.admin-panel{
  border:2px solid red;
  padding:20px;
  margin-top:40px;
}
</style>
</head>

<body>

<div class="top-bar">
  <a href="https://chastedragon.vercel.app">‚¨Ö Kembali ke Website Utama</a>
  <a href="https://instagram.com/donatsur_" target="_blank">
    üì∏ Instagram DonatSur
  </a>
</div>

<h1>üç© SHOP DONATSUR</h1>
<h2>CHASTE DRAGON SQUAD</h2>

<h2 id="shopStatus" style="color:lime;">SHOP SEDANG BUKA</h2>

<hr style="border:1px solid gold;margin:30px 0;">

<div id="shopContent">

<h3>Pilih Donat</h3>
<div class="varian-grid" id="varianContainer"></div>

<div class="form-box">

<h3>üì¶ Data Pemesan</h3>

<label>Pilih Paket</label>
<select id="paket" onchange="resetSemua()">
  <option value="3">Box Isi 3 (Diskon 5%)</option>
  <option value="6">Box Isi 6 (Diskon 10%)</option>
</select>

<input type="text" id="nama" placeholder="Nama Lengkap">
<input type="text" id="kota" placeholder="Asal Kota">
<input type="text" id="alamat" placeholder="Alamat Rumah / Lokasi">

<select id="pembayaran">
  <option value="">Pilih Pembayaran</option>
  <option>Transfer Bank</option>
  <option>DANA</option>
  <option>OVO</option>
  <option>COD</option>
</select>

<input type="text" id="promoInput" placeholder="Kode Promo" onkeyup="hitungTotal()">

<input type="text" id="orderID" readonly placeholder="Nomor Pesanan">

<hr style="border:1px solid gold;margin:15px 0;">

<input type="text" id="subtotalBox" readonly placeholder="Subtotal">
<input type="text" id="diskonBox" readonly placeholder="Total Diskon">
<input type="text" id="totalBox" readonly placeholder="Total Bayar" style="font-weight:bold;color:gold;">

<button onclick="pesanSekarang()">üç© Pesan Sekarang</button>

</div>

</div>

<div class="admin-panel">
<h3 style="color:red;">üîê ADMIN PANEL</h3>

<div id="loginArea">
<input type="password" id="adminPass" placeholder="Masukkan Password">
<button onclick="loginAdmin()">Login</button>
</div>

<div id="adminControls" style="display:none;">
<button onclick="toggleShop()">Buka / Tutup Shop</button>
<button onclick="logoutAdmin()">Logout</button>
</div>
</div>

<script>
const hargaSatuan = 12000;
const phoneNumber = "6285363155850";
const adminPassword = "DonatSurSpecial2026";

const promoList = {
  "DRAGON5":0.05,
  "DONAT10":0.10
};

let cart = {};
let shopOpen = true;

const varianList = [
"Coklat","Regal Matcha","Tiramisu Biscoff",
"Keju","Custard Milk","Sugar Dust",
"Buttery Glazed","Triple Choco","Double Choco"
];

function generateMenu(){
  const container=document.getElementById("varianContainer");
  container.innerHTML="";
  cart={};

  varianList.forEach(rasa=>{
    cart[rasa]=0;

    const item=document.createElement("div");
    item.className="varian-item";

    item.innerHTML=`
      <img src="https://via.placeholder.com/150">
      <p><strong>${rasa}</strong></p>
      <p style="color:gold;">Rp ${hargaSatuan.toLocaleString("id-ID")}</p>
      <div class="qty-box">
        <button onclick="kurang('${rasa}')">-</button>
        <span id="qty-${rasa}">0</span>
        <button onclick="tambah('${rasa}')">+</button>
      </div>
    `;

    container.appendChild(item);
  });

  hitungTotal();
}

function totalItem(){
  return Object.values(cart).reduce((a,b)=>a+b,0);
}

function tambah(rasa){
  const paket=parseInt(document.getElementById("paket").value);
  if(totalItem()>=paket){
    alert("Jumlah sesuai paket!");
    return;
  }
  cart[rasa]++;
  document.getElementById("qty-"+rasa).innerText=cart[rasa];
  hitungTotal();
}

function kurang(rasa){
  if(cart[rasa]>0){
    cart[rasa]--;
    document.getElementById("qty-"+rasa).innerText=cart[rasa];
    hitungTotal();
  }
}

function hitungTotal(){
  const paket=parseInt(document.getElementById("paket").value);
  let subtotal=totalItem()*hargaSatuan;

  let diskon=paket===3?subtotal*0.05:subtotal*0.10;
  let total=subtotal-diskon;

  const kode=document.getElementById("promoInput").value.toUpperCase();
  if(promoList[kode]){
    let diskonPromo=total*promoList[kode];
    diskon+=diskonPromo;
    total-=diskonPromo;
  }

  document.getElementById("subtotalBox").value="Subtotal: Rp "+subtotal.toLocaleString("id-ID");
  document.getElementById("diskonBox").value="Diskon: Rp "+diskon.toLocaleString("id-ID");
  document.getElementById("totalBox").value="Total Bayar: Rp "+total.toLocaleString("id-ID");
}

function generateOrderID(){
  const now=new Date();
  const tanggal=
    now.getFullYear().toString().slice(-2)+
    String(now.getMonth()+1).padStart(2,"0")+
    String(now.getDate()).padStart(2,"0");
  const random=Math.floor(1000+Math.random()*9000);
  return "DS-"+tanggal+"-"+random;
}

function pesanSekarang(){
  if(!shopOpen){
    alert("Shop sedang tutup!");
    return;
  }

  const paket=parseInt(document.getElementById("paket").value);
  if(totalItem()!==paket){
    alert("Jumlah harus sesuai paket!");
    return;
  }

  const nama=document.getElementById("nama").value;
  const kota=document.getElementById("kota").value;
  const alamat=document.getElementById("alamat").value;
  const bayar=document.getElementById("pembayaran").value;
  const total=document.getElementById("totalBox").value;

  if(!nama||!kota||!alamat||!bayar){
    alert("Lengkapi data dulu!");
    return;
  }

  const orderID=generateOrderID();
  document.getElementById("orderID").value="Order ID: "+orderID;

  let detail="";
  for(let rasa in cart){
    if(cart[rasa]>0){
      detail+=`${rasa} x${cart[rasa]}%0A`;
    }
  }

  const pesan=`Halo Admin DonatSur üç©%0A
Nomor Pesanan: ${orderID}%0A
%0ADATA PEMESAN:%0A
Nama: ${nama}%0A
Kota: ${kota}%0A
Alamat: ${alamat}%0A
Pembayaran: ${bayar}%0A
%0APESANAN:%0A${detail}
${total}`;

  window.open(`https://wa.me/${phoneNumber}?text=${pesan}`,"_blank");
}

function loginAdmin(){
  if(document.getElementById("adminPass").value===adminPassword){
    document.getElementById("loginArea").style.display="none";
    document.getElementById("adminControls").style.display="block";
  }else alert("Password salah!");
}

function logoutAdmin(){
  document.getElementById("loginArea").style.display="block";
  document.getElementById("adminControls").style.display="none";
}

function toggleShop(){
  shopOpen=!shopOpen;
  if(shopOpen){
    document.getElementById("shopStatus").innerText="SHOP SEDANG BUKA";
    document.getElementById("shopStatus").style.color="lime";
    document.getElementById("shopContent").style.display="block";
  }else{
    document.getElementById("shopStatus").innerText="SHOP SEDANG TUTUP";
    document.getElementById("shopStatus").style.color="red";
    document.getElementById("shopContent").style.display="none";
  }
}

function resetSemua(){
  generateMenu();
}

generateMenu();
</script>

</body>
</html>