<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open Donasi - CHASTE DRAGON</title>
<style>
body{
  margin:0;
  background:black;
  font-family:Poppins, sans-serif;
  color:white;
  text-align:center;
  padding:40px;
}

.container{
  max-width:700px;
  margin:auto;
  background:#111;
  border:2px solid gold;
  border-radius:20px;
  padding:40px;
  box-shadow:0 0 30px gold;
}

h1{ color:gold; margin-bottom:10px; }
h2{ color:white; font-weight:300; margin-bottom:20px; }
p{ margin-bottom:20px; }

input, textarea{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:10px;
  border:none;
  font-size:16px;
}

button{
  background:gold;
  color:black;
  padding:15px 25px;
  border:none;
  border-radius:12px;
  font-weight:bold;
  font-size:16px;
  cursor:pointer;
  transition:0.3s;
  box-shadow:0 0 10px gold;
  margin:10px 5px;
}

button:hover{
  background:orange;
  box-shadow:0 0 25px gold;
}

button:disabled{
  background:gray;
  color:white;
  cursor:not-allowed;
}

/* QR di bawah tombol */
#qrContainer{
  display:none;
  text-align:center;
  margin-top:10px;
}

#qrContainer img{
  display:block;
  margin:0 auto;
  border:2px solid gold;
  border-radius:12px;
  width:150px;
  height:auto;
}

/* Status Donasi Tutup */
#statusTutup{
  color:red;
  font-weight:bold;
  margin-top:20px;
  font-size:1.1rem;
}

/* Countdown */
#countdown{
  color:gold;
  font-weight:bold;
  font-size:1.2rem;
  margin-bottom:15px;
}
</style>
</head>
<body>

<div class="container">
  <h1>üíõ OPEN DONASI</h1>
  <h2>CHASTE DRAGON SQUAD Ê¥ÅÈæô</h2>

  <p>Terima kasih atas dukunganmu! Donasi akan digunakan untuk event, merchandise, dan pengembangan squad.</p>

  <div id="countdown">Sisa waktu donasi: --</div>

  <input type="text" id="nama" placeholder="Nama / Nickname" required>
  <input type="number" id="jumlah" placeholder="Jumlah Donasi (Rp)" required>
  <textarea id="pesan" placeholder="Pesan Tambahan (Opsional)"></textarea>

  <!-- Tombol Upload Bukti Transfer -->
  <div>
    <button type="button" onclick="document.getElementById('buktiTransfer').click()">
      UPLOAD BUKTI TRANSFER
    </button>
    <input type="file" id="buktiTransfer" accept="image/*" style="display:none;" onchange="tampilkanNamaFile()">
    <div id="namaFile" style="color:gold; margin-top:5px;"></div>
  </div>

  <div>
    <button id="btnWhatsApp" onclick="kirimDonasi()">KIRIM VIA WHATSAPP</button>
    <button id="btnQR" onclick="tampilkanQR()">TAMPILKAN QR DONASI</button>
  </div>

  <div id="qrContainer">
    <img src="../asset/qr_ID1024361924490_18.02.26_177136344_1771363449464.jpeg" alt="QR Donasi CHASTE DRAGON">
  </div>

  <div id="statusTutup"></div>
</div>

<script>
const btnWhatsApp = document.getElementById("btnWhatsApp");
const btnQR = document.getElementById("btnQR");
const statusTutup = document.getElementById("statusTutup");
const countdownEl = document.getElementById("countdown");

// ===== Set waktu penutupan donasi =====
const tutupDonasi = new Date(2026, 2, 20, 23, 59, 59).getTime(); 

// ===== Update Countdown =====
function updateCountdown(){
  const now = new Date().getTime();
  const distance = tutupDonasi - now;

  if(distance <= 0){
    countdownEl.innerText = "‚õî Donasi telah ditutup";
    btnWhatsApp.disabled = true;
    btnQR.disabled = true;
    document.getElementById("qrContainer").style.display = "none";
    statusTutup.innerText = "Donasi resmi telah ditutup.";
    return;
  }

  const days = Math.floor(distance / (1000*60*60*24));
  const hours = Math.floor((distance % (1000*60*60*24)) / (1000*60*60));
  const minutes = Math.floor((distance % (1000*60*60)) / (1000*60));
  const seconds = Math.floor((distance % (1000*60)) / 1000);

  countdownEl.innerText = `Sisa waktu donasi: ${days}H ${hours}J ${minutes}M ${seconds}D`;
}

// Update setiap detik
setInterval(updateCountdown, 1000);
updateCountdown();

// ===== Kirim Donasi =====
function kirimDonasi(){
  const nama = document.getElementById("nama").value.trim();
  const jumlah = document.getElementById("jumlah").value.trim();
  const pesan = document.getElementById("pesan").value.trim();
  const bukti = document.getElementById("buktiTransfer").files[0];

  if(!nama || !jumlah){
    alert("‚ö†Ô∏è Nama dan Jumlah Donasi wajib diisi!");
    return;
  }

  let pesanBukti = bukti ? `Bukti Transfer: ${bukti.name}` : "-";

  const nomorAdmin = "6282246142678";

  const url = "https://wa.me/" + nomorAdmin + "?text=" 
    + encodeURIComponent(
      `üíõ DONASI CHASTE DRAGON SQUAD\n\n` +
      `Nama: ${nama}\n` +
      `Jumlah Donasi: Rp${jumlah}\n` +
      `Pesan: ${pesan ? pesan : "-"}\n` +
      `${pesanBukti}\n\n` +
      "Terima kasih atas dukunganmu!"
    );

  window.open(url, "_blank");
}

// Toggle QR muncul/hilang
function tampilkanQR(){
  const qrC = document.getElementById("qrContainer");
  qrC.style.display = (qrC.style.display === "none") ? "block" : "none";
}

// Tampilkan nama file yang diupload
function tampilkanNamaFile(){
  const fileInput = document.getElementById("buktiTransfer");
  const namaFile = document.getElementById("namaFile");
  if(fileInput.files.length > 0){
    namaFile.innerText = "File terpilih: " + fileInput.files[0].name;
  } else {
    namaFile.innerText = "";
  }
}
</script>

<hr style="border:1px solid gold;margin:30px 0;">
<a href="https://chastedragon.vercel.app" style="color:gold;">‚¨Ö Kembali</a>

</body>
</html>